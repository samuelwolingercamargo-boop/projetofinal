<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Palavras-Chave</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 600;
        }
        
        .description {
            text-align: center;
            margin-bottom: 30px;
            color: #7f8c8d;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .input-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .results-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .results-group {
            flex: 1;
            min-width: 300px;
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }
        
        .results-group h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        .word-item {
            background-color: white;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
        }
        
        .word-text {
            font-weight: 500;
        }
        
        .word-count {
            color: #7f8c8d;
            font-weight: 600;
        }
        
        .grouped-words {
            margin-top: 30px;
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }
        
        .group-item {
            margin-bottom: 20px;
        }
        
        .group-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .group-variations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .variation {
            background-color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        @media (max-width: 768px) {
            .results-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Análise de Palavras-Chave</h1>
        
        <p class="description">
            Esta ferramenta processa palavras-chave, agrupa variações semelhantes (como "aluno", "aluna", "alunos", "alunas") 
            e as classifica por frequência em dois grupos: palavras mais frequentes e menos frequentes.
        </p>
        
        <div class="input-section">
            <h2>Insira suas palavras-chave</h2>
            <p>Digite as palavras-chave, uma por linha, ou use o exemplo pré-carregado:</p>
            <textarea id="keywordInput" placeholder="Digite suas palavras-chave aqui, uma por linha...">
aluno
aluna
alunos
alunas
professor
professora
professores
professoras
escola
escolas
ensino
aprendizado
aprendizagem
aprender
estudante
estudantes
educação
educacional
universidade
universidades
curso
cursos
disciplina
disciplinas
matéria
matérias
aula
aulas
livro
livros
didático
didáticos
didática
didáticas
prova
provas
exame
exames
avaliação
avaliações
nota
notas
trabalho
trabalhos
pesquisa
pesquisas
projeto
projetos
ensinar
educar
formação
formar
conhecimento
conhecimentos
aprendiz
aprendizes
ensinar
ensinando
estudar
estudando
aprender
aprendendo
avaliar
avaliando</textarea>
            <button onclick="processKeywords()">Processar Palavras-Chave</button>
        </div>
        
        <div id="results" style="display: none;">
            <div class="results-section">
                <div class="results-group">
                    <h2>Palavras Mais Frequentes</h2>
                    <div id="frequentWords"></div>
                </div>
                <div class="results-group">
                    <h2>Palavras Menos Frequentes</h2>
                    <div id="infrequentWords"></div>
                </div>
            </div>
            
            <div class="grouped-words">
                <h2>Palavras Agrupadas por Significado</h2>
                <div id="groupedWords"></div>
            </div>
        </div>
    </div>

    <script>
        // Etapa 1: Função para unir palavras parecidas
        function groupSimilarWords(words) {
            const groups = {};
            
            words.forEach(word => {
                // Remover acentos e converter para minúsculas para melhor comparação
                const normalized = word.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
                
                // Encontrar a raiz da palavra (removendo sufixos comuns)
                let root = normalized;
                
                // Remover sufixos plurais e de gênero comuns em português
                const suffixes = ['s', 'a', 'o', 'as', 'os', 'es', 'ão', 'ões'];
                for (const suffix of suffixes) {
                    if (root.endsWith(suffix) && root.length > suffix.length + 2) {
                        root = root.slice(0, -suffix.length);
                        break;
                    }
                }
                
                // Se a raiz for muito curta, usar a palavra normalizada
                if (root.length < 3) {
                    root = normalized;
                }
                
                // Agrupar por raiz
                if (!groups[root]) {
                    groups[root] = new Set();
                }
                groups[root].add(word);
            });
            
            // Converter Sets para Arrays e escolher a palavra representativa
            const result = {};
            Object.keys(groups).forEach(root => {
                const wordsArray = Array.from(groups[root]);
                // Escolher a palavra mais curta como representante (geralmente a forma singular)
                const representative = wordsArray.reduce((shortest, current) => 
                    current.length < shortest.length ? current : shortest
                );
                result[representative] = wordsArray;
            });
            
            return result;
        }
        
        // Etapa 2: Classificar palavras por frequência
        function classifyByFrequency(wordCounts) {
            const words = Object.keys(wordCounts);
            if (words.length === 0) return { frequent: [], infrequent: [] };
            
            // Calcular média de frequência
            const frequencies = Object.values(wordCounts);
            const avgFrequency = frequencies.reduce((sum, freq) => sum + freq, 0) / frequencies.length;
            
            // Separar em grupos
            const frequent = [];
            const infrequent = [];
            
            words.forEach(word => {
                if (wordCounts[word] >= avgFrequency) {
                    frequent.push({ word, count: wordCounts[word] });
                } else {
                    infrequent.push({ word, count: wordCounts[word] });
                }
            });
            
            // Ordenar por frequência (decrescente)
            frequent.sort((a, b) => b.count - a.count);
            infrequent.sort((a, b) => b.count - a.count);
            
            return { frequent, infrequent };
        }
        
        // Função principal para processar as palavras-chave
        function processKeywords() {
            const input = document.getElementById('keywordInput').value;
            const words = input.split('\n')
                .map(word => word.trim())
                .filter(word => word.length > 0);
            
            if (words.length === 0) {
                alert('Por favor, insira algumas palavras-chave.');
                return;
            }
            
            // Contar frequência das palavras
            const wordCounts = {};
            words.forEach(word => {
                wordCounts[word] = (wordCounts[word] || 0) + 1;
            });
            
            // Agrupar palavras similares
            const groupedWords = groupSimilarWords(words);
            
            // Classificar por frequência
            const { frequent, infrequent } = classifyByFrequency(wordCounts);
            
            // Exibir resultados
            displayResults(frequent, infrequent, groupedWords);
        }
        
        // Função para exibir os resultados na interface
        function displayResults(frequent, infrequent, groupedWords) {
            // Exibir palavras frequentes
            const frequentContainer = document.getElementById('frequentWords');
            frequentContainer.innerHTML = '';
            frequent.forEach(item => {
                const div = document.createElement('div');
                div.className = 'word-item';
                div.innerHTML = `
                    <span class="word-text">${item.word}</span>
                    <span class="word-count">${item.count}x</span>
                `;
                frequentContainer.appendChild(div);
            });
            
            // Exibir palavras menos frequentes
            const infrequentContainer = document.getElementById('infrequentWords');
            infrequentContainer.innerHTML = '';
            infrequent.forEach(item => {
                const div = document.createElement('div');
                div.className = 'word-item';
                div.innerHTML = `
                    <span class="word-text">${item.word}</span>
                    <span class="word-count">${item.count}x</span>
                `;
                infrequentContainer.appendChild(div);
            });
            
            // Exibir palavras agrupadas
            const groupedContainer = document.getElementById('groupedWords');
            groupedContainer.innerHTML = '';
            
            Object.keys(groupedWords).forEach(representative => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'group-item';
                
                const titleDiv = document.createElement('div');
                titleDiv.className = 'group-title';
                titleDiv.textContent = `Grupo: ${representative}`;
                
                const variationsDiv = document.createElement('div');
                variationsDiv.className = 'group-variations';
                
                groupedWords[representative].forEach(variation => {
                    const span = document.createElement('span');
                    span.className = 'variation';
                    span.textContent = variation;
                    variationsDiv.appendChild(span);
                });
                
                groupDiv.appendChild(titleDiv);
                groupDiv.appendChild(variationsDiv);
                groupedContainer.appendChild(groupDiv);
            });
            
            // Mostrar a seção de resultados
            document.getElementById('results').style.display = 'block';
        }
        
        // Processar automaticamente ao carregar a página
        window.onload = processKeywords;
    </script>
</body>
</html>
